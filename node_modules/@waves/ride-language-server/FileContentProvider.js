"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.FileContentProvider = void 0;
const vscode_languageserver_1 = require("vscode-languageserver");
const fs = require("fs");
const vscode_uri_1 = require("vscode-uri");
const path = require("path");
class FileContentProvider {
    constructor(inmemoryStorage) {
        this.inmemoryStorage = inmemoryStorage;
    }
    getContent(filePath, relativeTo) {
        if (relativeTo != null) {
            const folder = vscode_languageserver_1.Files.uriToFilePath(relativeTo).split('/').slice(0, -1).join('/');
            filePath = path.resolve(__dirname, folder, filePath);
        }
        const uri = vscode_uri_1.URI.file(filePath).toString();
        if (this.inmemoryStorage[uri] != null) {
            return this.inmemoryStorage[uri].getText();
        }
        else {
            return fs.readFileSync(filePath).toString();
        }
    }
}
exports.FileContentProvider = FileContentProvider;
//# sourceMappingURL=FileContentProvider.js.map